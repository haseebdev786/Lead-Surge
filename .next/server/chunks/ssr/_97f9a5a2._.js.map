{"version":3,"sources":["turbopack:///[project]/utils/ui.js","turbopack:///[project]/pages/credits.js","turbopack:///[project]/node_modules/next/dist/esm/build/templates/pages.js"],"sourcesContent":["export const panelClass =\n  'rounded-3xl border border-white/10 bg-white/5 p-6 text-slate-100 shadow-xl shadow-slate-950/20 backdrop-blur-xl';\nexport const heroPanelClass =\n  'rounded-3xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/30 to-indigo-900/20 p-8 text-slate-100 shadow-2xl shadow-slate-950/30';\nexport const mutedLabelClass = 'text-sm font-medium text-slate-300';\nexport const inputClass =\n  'mt-2 w-full rounded-2xl border border-white/20 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60';\nexport const textareaClass = inputClass + ' min-h-[140px] resize-none';\nexport const selectClass = inputClass;\nexport const selectDarkClass = `${selectClass} select-dark`;\nexport const primaryButtonClass =\n  'inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:brightness-105 disabled:cursor-not-allowed disabled:opacity-60';\nexport const secondaryButtonClass =\n  'inline-flex items-center justify-center rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60';\nexport const dangerButtonClass =\n  'inline-flex items-center justify-center rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-2 text-sm font-semibold text-rose-100 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60';\nexport const infoTextClass = 'text-sm text-slate-400';\nexport const pillClass = 'text-[0.65rem] uppercase tracking-[0.35em] text-slate-400';\nexport const statusPillMap = {\n  posted: 'bg-emerald-500/20 text-emerald-200',\n  scheduled: 'bg-amber-500/20 text-amber-200',\n  failed: 'bg-rose-500/20 text-rose-200',\n};\n","import { useState } from 'react';\nimport Layout from '../components/Layout';\nimport withAuth from '../hoc/withAuth';\nimport { useAuth } from '../context/AuthContext';\nimport {\n  heroPanelClass,\n  panelClass,\n  inputClass,\n  primaryButtonClass,\n  infoTextClass,\n  pillClass,\n  mutedLabelClass,\n} from '../utils/ui';\n\n/**\n * Credits page. Displays the user's current credit balance and provides\n * a form to purchase additional credits via Stripe. The quantity and\n * price ID are configurable via environment variables. When the user\n * initiates a purchase they are redirected to Stripe Checkout.\n */\nfunction Credits() {\n  const { user } = useAuth();\n  const [creditsToBuy, setCreditsToBuy] = useState(10);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const priceId = process.env.NEXT_PUBLIC_STRIPE_CREDIT_PRICE_ID || 'price_YYY';\n\n  async function purchaseCredits() {\n    setError('');\n    setLoading(true);\n    const qty = parseInt(creditsToBuy, 10);\n    if (!qty || qty <= 0) {\n      setError('Please enter a valid number of credits');\n      setLoading(false);\n      return;\n    }\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/payments/credits-session`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n        body: JSON.stringify({ credits: qty, priceId }),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Failed to create checkout session');\n      window.location.href = data.url;\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Layout>\n      <div className=\"space-y-8\">\n        <section className={heroPanelClass}>\n          <div className=\"flex flex-col gap-4\">\n            <p className={pillClass}>Usage wallet</p>\n            <h2 className=\"text-4xl font-semibold text-white\">Credits</h2>\n            <p className=\"text-sm text-slate-300\">\n              Purchase more AI credits instantly. Every generation and scheduled publish keeps you in the loop.\n            </p>\n            <div className=\"flex flex-wrap gap-4\">\n              <div className=\"rounded-2xl border border-white/10 bg-white/5 px-5 py-4 text-center\">\n                <p className=\"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400\">Current balance</p>\n                <p className=\"mt-2 text-3xl font-semibold text-white\">{user?.credits ?? 0}</p>\n              </div>\n            </div>\n          </div>\n        </section>\n        {error && (\n          <p className=\"rounded-2xl border border-rose-400/30 bg-rose-500/10 px-4 py-2 text-sm text-rose-100\">{error}</p>\n        )}\n        <section className={`${panelClass} space-y-5`}>\n          <div>\n            <label htmlFor=\"credits\" className={mutedLabelClass}>\n              Credits to purchase\n            </label>\n            <input\n              id=\"credits\"\n              type=\"number\"\n              min=\"1\"\n              value={creditsToBuy}\n              onChange={(e) => setCreditsToBuy(e.target.value)}\n              className={inputClass}\n            />\n          </div>\n          <button type=\"button\" onClick={purchaseCredits} disabled={loading} className={primaryButtonClass}>\n            {loading ? 'Redirecting...' : 'Purchase credits'}\n          </button>\n          <p className={infoTextClass}>\n            You will be redirected to a secure Stripe Checkout to complete the purchase.\n          </p>\n          {!process.env.NEXT_PUBLIC_STRIPE_CREDIT_PRICE_ID && (\n            <p className=\"text-xs text-amber-200\">\n              Warning: The Stripe credit price ID is not configured (NEXT_PUBLIC_STRIPE_CREDIT_PRICE_ID).\n            </p>\n          )}\n        </section>\n      </div>\n    </Layout>\n  );\n}\n\nexport default withAuth(Credits);\n","import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/credits\",\n        pathname: \"/credits\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/credits\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n"],"names":[],"mappings":"sCAKO,IAAM,EACX,+OACW,EAAgB,EAAa,6BAE7B,EAAkB,CAAA,EAAG,EAAY,YAAY,CAAC,4BAMzD,gPAZA,+KAa2B,8DAZE,oDAH7B,gIAgBuB,mFANvB,+RAEA,+NALyB,0CAUE,CAC3B,OAAQ,qCACR,UAAW,iCACX,OAAQ,8BACV,+CEtBA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MAEA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,kBDLA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,YAqGe,CAAA,EAAA,EAAA,OAAA,AAAQ,EAAC,AArFxB,SAAS,EACP,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC7B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,EAAU,QAAQ,GAAG,CAAC,kCAAkC,EAAI,YAElE,eAAe,IACb,EAAS,IACT,GAAW,GACX,IAAM,EAAM,SAAS,EAAc,IACnC,GAAI,CAAC,GAAO,GAAO,EAAG,CACpB,EAAS,0CACT,EAAW,IACX,MACF,CACA,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,qDAA+D,CACrF,OAAQ,IADiD,GAEzD,QAAS,CAAE,aAFuE,CAAC,CAExD,mBAAoB,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,EAChF,KAAM,KAAK,SAAS,CAAC,CAAE,QAAS,UAAK,CAAQ,EAC/C,GACM,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,EAAK,KAAK,EAAI,qCAC3C,OAAO,QAAQ,CAAC,IAAI,CAAG,EAAK,GAAG,AACjC,CAAE,MAAO,EAAK,CACZ,EAAS,EAAI,OAAO,CACtB,QAAU,CACR,GAAW,EACb,CACF,CAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,UACL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAW,EAAA,cAAc,UAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,EAAA,SAAS,UAAE,iBACzB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,YAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,sGAGtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gFACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qEAA4D,oBACzE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAA0C,GAAM,SAAW,cAK/E,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gGAAwF,IAEvG,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAW,CAAA,EAAG,EAAA,UAAU,CAAC,UAAU,CAAC,WAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,UAAU,UAAW,EAAA,eAAe,UAAE,wBAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,UACH,KAAK,SACL,IAAI,IACJ,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,UAAW,EAAA,UAAU,MAGzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,QAAS,EAAiB,SAAU,EAAS,UAAW,EAAA,kBAAkB,UAC7F,EAAU,iBAAmB,qBAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,EAAA,aAAa,UAAE,iFAG5B,CAAC,QAAQ,GAAG,CAAC,kCAAkC,EAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,uGAQlD,6BChGA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,YAEe,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,WAElB,EAAiB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,kBACjC,EAAiB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,kBACjC,EAAqB,CAAA,EAAA,EAAA,KAAK,AAAL,EAAM,EAAU,sBACrC,EAAS,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,UACzB,EAAkB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,mBAElC,EAA0B,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,2BAC1C,EAA0B,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,2BAC1C,EAA2B,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,4BAC3C,EAA0B,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,2BAC1C,EAA8B,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,+BAE9C,EAAc,IAAI,EAAA,gBAAgB,CAAC,CAC5C,WAAY,CACR,KAAM,EAAA,SAAS,CAAC,KAAK,CACrB,KAAM,WACN,SAAU,WAEV,WAAY,GACZ,SAAU,EACd,EACA,QAAS,CAAA,OACT,IADiD,eACc,CAA3C,EACpB,WAAY,CAER,IAAK,EAAA,OAAW,CAChB,SAAU,EAAA,OAAgB,AAC9B,EACA,SAAA,CACJ,GACa,EAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,CAC9B,QAAS,kBACT,EACA,SAAA,cACA,iBACA,iBACA,qBACA,CACJ,IAEA,iCAAiC","ignoreList":[2]}