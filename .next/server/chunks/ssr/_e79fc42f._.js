module.exports=[7801,a=>{"use strict";let b="mt-2 w-full rounded-2xl border border-white/20 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",c=b+" min-h-[140px] resize-none",d=`${b} select-dark`;a.s(["dangerButtonClass",0,"inline-flex items-center justify-center rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-2 text-sm font-semibold text-rose-100 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60","heroPanelClass",0,"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/30 to-indigo-900/20 p-8 text-slate-100 shadow-2xl shadow-slate-950/30","infoTextClass",0,"text-sm text-slate-400","inputClass",0,b,"mutedLabelClass",0,"text-sm font-medium text-slate-300","panelClass",0,"rounded-3xl border border-white/10 bg-white/5 p-6 text-slate-100 shadow-xl shadow-slate-950/20 backdrop-blur-xl","pillClass",0,"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400","primaryButtonClass",0,"inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:brightness-105 disabled:cursor-not-allowed disabled:opacity-60","secondaryButtonClass",0,"inline-flex items-center justify-center rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60","selectClass",0,b,"selectDarkClass",0,d,"statusPillMap",0,{posted:"bg-emerald-500/20 text-emerald-200",scheduled:"bg-amber-500/20 text-amber-200",failed:"bg-rose-500/20 text-rose-200"},"textareaClass",0,c])},5205,a=>{"use strict";var b=a.i(9168),c=a.i(7068),d=a.i(2759),e=a.i(3590),f=a.i(7342),g=a.i(8171),h=a.i(7669),i=a.i(7288),j=a.i(7551),k=a.i(8541),l=a.i(7801);let m=(0,j.default)(function(){let{refresh:a}=(0,k.useAuth)(),[b,c]=(0,h.useState)([]),[d,e]=(0,h.useState)(""),[f,j]=(0,h.useState)(""),[m,n]=(0,h.useState)(""),[o,p]=(0,h.useState)(""),[q,r]=(0,h.useState)(""),[s,t]=(0,h.useState)(""),[u,v]=(0,h.useState)(""),[w,x]=(0,h.useState)(!1);async function y(a){a.preventDefault(),v(""),t(""),x(!0);let g=localStorage.getItem("token");try{let a=await fetch("http://localhost:4000/api/dms/templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify({name:d,message:f})}),h=await a.json();if(!a.ok)throw Error(h.error||"Failed to create template");c([h,...b]),e(""),j(""),t("Template created")}catch(a){v(a.message)}finally{x(!1)}}async function z(a){v(""),t("");let d=localStorage.getItem("token");try{if(!(await fetch(`http://localhost:4000/api/dms/templates/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`}})).ok)throw Error("Delete failed");c(b.filter(b=>b._id!==a)),m===a&&n(""),t("Template deleted")}catch(a){v(a.message)}}async function A(){if(v(""),t(""),!m)return void v("Please select a template first");let c=b.find(a=>a._id===m);if(!c)return void v("Selected template not found");x(!0);let d=localStorage.getItem("token");try{let b=await fetch("http://localhost:4000/api/ai/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({template:c.message})}),e=await b.json();if(!b.ok)throw Error(e.error||"Failed to personalize message");r(e.message),t("Message personalized"),await a()}catch(a){v(a.message)}finally{x(!1)}}async function B(){if(v(""),t(""),!m)return void v("Please select a template first");if(!o)return void v("Recipient ID is required");let c=b.find(a=>a._id===m),d=q||(c?c.message:"");if(!d)return void v("No message to send");x(!0);let e=localStorage.getItem("token");try{let b=await fetch("http://localhost:4000/api/dms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({recipientId:o,message:d})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to send DM");t("Message sent successfully"),p(""),r(""),await a()}catch(a){v(a.message)}finally{x(!1)}}return(0,h.useEffect)(()=>{!async function(){let a=localStorage.getItem("token");try{let b=await fetch("http://localhost:4000/api/dms/templates",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();c(a)}}catch(a){console.error("Failed to load templates",a)}}()},[]),(0,g.jsx)(i.default,{children:(0,g.jsxs)("div",{className:"space-y-8",children:[(0,g.jsx)("section",{className:l.heroPanelClass,children:(0,g.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,g.jsx)("p",{className:l.pillClass,children:"Outreach studio"}),(0,g.jsx)("h2",{className:"text-4xl font-semibold text-white",children:"DM Automation"}),(0,g.jsx)("p",{className:"text-sm text-slate-300",children:"Save reusable scripts, personalize them with AI and push Instagram DMs without leaving your dashboard."})]})}),u&&(0,g.jsx)("p",{className:"rounded-2xl border border-rose-400/30 bg-rose-500/10 px-4 py-2 text-sm text-rose-100",children:u}),s&&(0,g.jsx)("p",{className:"rounded-2xl border border-emerald-400/30 bg-emerald-400/10 px-4 py-2 text-sm text-emerald-100",children:s}),(0,g.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,g.jsxs)("div",{className:`${l.panelClass} space-y-4`,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:l.pillClass,children:"Templates"}),(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Create a template"}),(0,g.jsx)("p",{className:l.infoTextClass,children:"Draft once, reuse forever. AI can personalize later."})]}),(0,g.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"name",className:l.mutedLabelClass,children:"Template Name"}),(0,g.jsx)("input",{id:"name",type:"text",value:d,onChange:a=>e(a.target.value),required:!0,className:l.inputClass})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"message",className:l.mutedLabelClass,children:"Message Text"}),(0,g.jsx)("textarea",{id:"message",value:f,onChange:a=>j(a.target.value),rows:4,required:!0,className:l.textareaClass})]}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{type:"submit",disabled:w,className:l.primaryButtonClass,children:w?"Saving...":"Save Template"})})]})]}),(0,g.jsxs)("div",{className:`${l.panelClass} space-y-4`,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:l.pillClass,children:"Library"}),(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Templates"}),(0,g.jsx)("p",{className:l.infoTextClass,children:"Select, personalize and send without leaving this panel."})]}),0===b.length?(0,g.jsx)("p",{className:l.infoTextClass,children:"No templates created yet."}):(0,g.jsx)("ul",{className:"space-y-3",children:b.map(a=>(0,g.jsxs)("li",{className:`rounded-2xl border p-3 text-sm ${m===a._id?"border-sky-400/40 bg-sky-500/10":"border-white/10 bg-white/5"}`,children:[(0,g.jsxs)("div",{className:"flex justify-between items-start",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("p",{className:"font-semibold text-white",children:a.name}),(0,g.jsx)("p",{className:"text-slate-300 break-words",children:a.message})]}),(0,g.jsx)("button",{onClick:()=>z(a._id),className:`${l.dangerButtonClass} ml-2`,children:"Delete"})]}),(0,g.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,g.jsx)("button",{onClick:()=>n(a._id),className:`text-xs ${m===a._id?"rounded-full bg-sky-500/80 px-3 py-1 font-semibold text-white":"rounded-full border border-white/15 px-3 py-1 text-slate-300 hover:border-white/40"}`,children:m===a._id?"Selected":"Select"})})]},a._id))}),b.length>0&&(0,g.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,g.jsx)("h4",{className:"text-xl font-semibold text-white",children:"Personalize & Send"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"recipient",className:l.mutedLabelClass,children:"Recipient IG User ID"}),(0,g.jsx)("input",{id:"recipient",type:"text",value:o,onChange:a=>p(a.target.value),placeholder:"123456789",className:l.inputClass})]}),q&&(0,g.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3",children:[(0,g.jsx)("p",{className:"text-sm font-semibold text-white",children:"Personalized Message"}),(0,g.jsx)("p",{className:"text-slate-200 whitespace-pre-line break-words",children:q})]}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,g.jsx)("button",{type:"button",onClick:A,disabled:w,className:l.secondaryButtonClass,children:w?"Generating...":"Personalize Message"}),(0,g.jsx)("button",{type:"button",onClick:B,disabled:w,className:l.primaryButtonClass,children:w?"Sending...":"Send DM"})]})]})]})]})]})})});a.s(["default",0,m],4551);var n=a.i(4551),o=a.i(9193);let p=(0,d.hoist)(n,"default"),q=(0,d.hoist)(n,"getStaticProps"),r=(0,d.hoist)(n,"getStaticPaths"),s=(0,d.hoist)(n,"getServerSideProps"),t=(0,d.hoist)(n,"config"),u=(0,d.hoist)(n,"reportWebVitals"),v=(0,d.hoist)(n,"unstable_getStaticProps"),w=(0,d.hoist)(n,"unstable_getStaticPaths"),x=(0,d.hoist)(n,"unstable_getStaticParams"),y=(0,d.hoist)(n,"unstable_getServerProps"),z=(0,d.hoist)(n,"unstable_getServerSideProps"),A=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/dm-templates",pathname:"/dm-templates",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:n}),B=(0,o.getHandler)({srcPage:"/dm-templates",config:t,userland:n,routeModule:A,getStaticPaths:r,getStaticProps:q,getServerSideProps:s});a.s(["config",0,t,"default",0,p,"getServerSideProps",0,s,"getStaticPaths",0,r,"getStaticProps",0,q,"handler",0,B,"reportWebVitals",0,u,"routeModule",0,A,"unstable_getServerProps",0,y,"unstable_getServerSideProps",0,z,"unstable_getStaticParams",0,x,"unstable_getStaticPaths",0,w,"unstable_getStaticProps",0,v],5205)}];

//# sourceMappingURL=_e79fc42f._.js.map