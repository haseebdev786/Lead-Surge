module.exports=[7801,a=>{"use strict";let b="mt-2 w-full rounded-2xl border border-white/20 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",c=b+" min-h-[140px] resize-none",d=`${b} select-dark`;a.s(["dangerButtonClass",0,"inline-flex items-center justify-center rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-2 text-sm font-semibold text-rose-100 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60","heroPanelClass",0,"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/30 to-indigo-900/20 p-8 text-slate-100 shadow-2xl shadow-slate-950/30","infoTextClass",0,"text-sm text-slate-400","inputClass",0,b,"mutedLabelClass",0,"text-sm font-medium text-slate-300","panelClass",0,"rounded-3xl border border-white/10 bg-white/5 p-6 text-slate-100 shadow-xl shadow-slate-950/20 backdrop-blur-xl","pillClass",0,"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400","primaryButtonClass",0,"inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:brightness-105 disabled:cursor-not-allowed disabled:opacity-60","secondaryButtonClass",0,"inline-flex items-center justify-center rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60","selectClass",0,b,"selectDarkClass",0,d,"statusPillMap",0,{posted:"bg-emerald-500/20 text-emerald-200",scheduled:"bg-amber-500/20 text-amber-200",failed:"bg-rose-500/20 text-rose-200"},"textareaClass",0,c])},2917,a=>{"use strict";var b=a.i(9168),c=a.i(7068),d=a.i(2759),e=a.i(3590),f=a.i(7342),g=a.i(8171),h=a.i(7669),i=a.i(7288),j=a.i(7551),k=a.i(8541),l=a.i(7801);let m=(0,j.default)(function(){let{refresh:a}=(0,k.useAuth)(),[b,c]=(0,h.useState)(""),[d,e]=(0,h.useState)(""),[f,j]=(0,h.useState)("instagram"),[m,n]=(0,h.useState)([]),[o,p]=(0,h.useState)(""),[q,r]=(0,h.useState)(""),[s,t]=(0,h.useState)(""),[u,v]=(0,h.useState)(!1),[w,x]=(0,h.useState)(!1),[y,z]=(0,h.useState)(null),[A,B]=(0,h.useState)(""),[C,D]=(0,h.useState)(!1),E=(0,h.useRef)(null),F=m.filter(a=>"scheduled"===a.status).length,G=m.filter(a=>"failed"===a.status).length,H=m.filter(a=>"posted"===a.status).length,I=[o&&{tone:"success",text:o},q&&{tone:"danger",text:q},s&&{tone:"danger",text:s},A&&{tone:"danger",text:A}].filter(Boolean),J={success:"border-emerald-400/30 bg-emerald-400/10 text-emerald-100",danger:"border-rose-400/30 bg-rose-500/10 text-rose-100"},K=async()=>{let a=localStorage.getItem("token");try{let b=await fetch("http://localhost:4000/api/posts",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();n(a)}}catch(a){console.error("Failed to load posts",a)}};async function L(a){B(""),z(null),r(""),t("");let b=a.target.files?.[0];if(!b)return;let c=localStorage.getItem("token"),d=new FormData;d.append("media",b),x(!0);try{let a=await fetch("http://localhost:4000/api/media/upload",{method:"POST",headers:{Authorization:`Bearer ${c}`},body:d}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to upload media");z(b)}catch(a){B(a.message),z(null),E.current&&(E.current.value="")}finally{x(!1)}}async function M(){t(""),p(""),r("");let d=localStorage.getItem("token"),e=b.trim();if(!e)return void t("Please enter a draft caption before using AI enhancement.");try{D(!0);let b={caption:e,platform:f};y?.url&&(b.imageUrl=y.url);let g=await fetch("http://localhost:4000/api/ai/caption/enhance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(b)}),h=await g.json();if(!g.ok)throw Error(h.error||"Failed to enhance caption");let i=(h.caption||"").trim();if(!i)throw Error("AI did not return an enhanced caption. Please try again.");c(i),p("Caption enhanced with AI."),await a()}catch(a){t(a.message)}finally{D(!1)}}async function N(g){if(g.preventDefault(),r(""),p(""),t(""),!y)return void r("Please upload an image or video before scheduling your post.");v(!0);let h=localStorage.getItem("token");try{let g=await fetch("http://localhost:4000/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({caption:b,mediaUrl:y.url,mediaStoragePath:y.path,mediaMimeType:y.mimetype,scheduledFor:d||void 0,platform:f})}),i=await g.json();if(!g.ok)throw Error(i.error||"Failed to schedule post");p("posted"===i.status?"Post published successfully":"Post scheduled successfully"),c(""),e(""),j("instagram"),z(null),B(""),t(""),E.current&&(E.current.value=""),await K(),await a()}catch(a){r(a.message)}finally{v(!1)}}return(0,h.useEffect)(()=>{K()},[]),(0,g.jsx)(i.default,{children:(0,g.jsxs)("div",{className:"space-y-8",children:[(0,g.jsx)("section",{className:l.heroPanelClass,children:(0,g.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:l.pillClass,children:"Campaign cockpit"}),(0,g.jsx)("h2",{className:"mt-4 text-4xl font-semibold text-white",children:"Post Scheduler"}),(0,g.jsx)("p",{className:"mt-3 max-w-2xl text-sm text-slate-300",children:"Monitor credits, track automation health and queue cross-network posts with a single composer."})]}),(0,g.jsx)("div",{className:"grid w-full gap-4 text-center sm:grid-cols-3 lg:w-auto",children:[{label:"Ready to post",value:F},{label:"Published",value:H},{label:"Needs attention",value:G}].map(a=>(0,g.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-6 py-4",children:[(0,g.jsx)("p",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400",children:a.label}),(0,g.jsx)("p",{className:"mt-2 text-3xl font-semibold text-white",children:a.value})]},a.label))})]})}),I.length>0&&(0,g.jsx)("div",{className:"grid gap-3",children:I.map((a,b)=>(0,g.jsx)("div",{className:`rounded-2xl border px-4 py-3 text-sm ${J[a.tone]}`,children:a.text},`${a.text}-${b}`))}),(0,g.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,g.jsxs)("section",{className:`${l.panelClass} space-y-6`,children:[(0,g.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:l.pillClass,children:"Composer"}),(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Schedule a new post"})]}),(0,g.jsx)("button",{type:"button",onClick:M,disabled:C||!b.trim()||w,className:l.secondaryButtonClass,children:C?"Enhancing...":"Enhance with AI"})]}),(0,g.jsxs)("form",{onSubmit:N,className:"space-y-5",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"caption",className:l.mutedLabelClass,children:"Caption"}),(0,g.jsx)("textarea",{id:"caption",value:b,onChange:a=>{c(a.target.value),s&&t("")},required:!0,className:l.textareaClass,placeholder:"Draft your caption or paste an outline..."}),(0,g.jsx)("p",{className:`${l.infoTextClass} mt-2`,children:"AI enhancements and immediate publishes deduct credits."})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"mediaFile",className:l.mutedLabelClass,children:"Upload image or video"}),(0,g.jsx)("input",{id:"mediaFile",ref:E,type:"file",accept:"image/*,video/*",onChange:L,disabled:w,className:"mt-2 block w-full cursor-pointer rounded-2xl border border-dashed border-white/30 bg-white/5 px-4 py-3 text-sm text-slate-200 file:mr-4 file:rounded-full file:border-0 file:bg-white/20 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:border-white/60"}),w&&(0,g.jsx)("p",{className:`${l.infoTextClass} mt-2`,children:"Uploading media..."}),y&&(0,g.jsxs)("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-semibold text-white",children:y.originalname||y.fileName||"Uploaded asset"}),(0,g.jsxs)("p",{className:"text-xs text-slate-400",children:[null!=y.size?`${(y.size/1048576).toFixed(2)} MB`:"Size unknown"," ","- ",y.mimetype]})]}),(0,g.jsx)("button",{type:"button",onClick:function(){z(null),B(""),E.current&&(E.current.value="")},className:l.dangerButtonClass,children:"Remove"})]}),y.url&&(0,g.jsx)("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-2",children:y.mimetype?.startsWith("video/")?(0,g.jsx)("video",{src:y.url,controls:!0,className:"w-full rounded-2xl"}):(0,g.jsx)("img",{src:y.url,alt:"Uploaded preview",className:"w-full rounded-2xl object-cover"})})]})]}),(0,g.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"scheduledFor",className:l.mutedLabelClass,children:"Schedule (optional)"}),(0,g.jsx)("input",{id:"scheduledFor",type:"datetime-local",value:d,onChange:a=>e(a.target.value),className:`${l.inputClass} input-datetime`})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"platform",className:l.mutedLabelClass,children:"Platform"}),(0,g.jsxs)("select",{id:"platform",value:f,onChange:a=>j(a.target.value),className:l.selectDarkClass,children:[(0,g.jsx)("option",{value:"instagram",children:"Instagram"}),(0,g.jsx)("option",{value:"facebook",children:"Facebook"})]})]})]}),(0,g.jsx)("button",{type:"submit",disabled:u,className:l.primaryButtonClass,children:u?"Submitting...":"Queue post"})]})]}),(0,g.jsxs)("section",{className:`${l.panelClass} overflow-hidden`,children:[(0,g.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:l.pillClass,children:"Pipeline"}),(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Your scheduled posts"})]}),(0,g.jsxs)("span",{className:"rounded-full border border-white/15 bg-white/5 px-4 py-2 text-xs text-slate-300",children:[m.length," total entries"]})]}),0===m.length?(0,g.jsx)("p",{className:`${l.infoTextClass} mt-6`,children:"No posts yet. Start by uploading creative on the left."}):(0,g.jsx)("div",{className:"mt-6 overflow-auto rounded-2xl border border-white/10",children:(0,g.jsxs)("table",{className:"min-w-full text-sm text-slate-200",children:[(0,g.jsx)("thead",{className:"text-left text-xs uppercase text-slate-400",children:(0,g.jsxs)("tr",{className:"border-b border-white/10 bg-white/5",children:[(0,g.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Caption"}),(0,g.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Status"}),(0,g.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Media"}),(0,g.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Scheduled"}),(0,g.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Platform"})]})}),(0,g.jsx)("tbody",{children:m.map(a=>{var b;let c;return(0,g.jsxs)("tr",{className:"border-b border-white/5 last:border-b-0 hover:bg-white/5",children:[(0,g.jsx)("td",{className:"px-4 py-3 align-top",children:(0,g.jsx)("p",{className:"max-w-xs break-words text-slate-100",children:a.caption||"No caption"})}),(0,g.jsx)("td",{className:"px-4 py-3 align-top",children:(0,g.jsx)("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${(c=a.status,l.statusPillMap[c]||"bg-white/10 text-white")}`,children:a.status})}),(0,g.jsx)("td",{className:"px-4 py-3 align-top",children:a.mediaUrl?(0,g.jsx)("a",{href:a.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-300 underline-offset-2 hover:text-white hover:underline",children:"View"}):(0,g.jsx)("span",{className:"text-slate-400 text-xs",children:"None"})}),(0,g.jsx)("td",{className:"px-4 py-3 align-top",children:a.scheduledFor?(b=a.scheduledFor)?new Date(b).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):"Not set":"Immediate"}),(0,g.jsx)("td",{className:"px-4 py-3 align-top capitalize",children:a.platform})]},a._id)})})]})})]})]})]})})});a.s(["default",0,m],2349);var n=a.i(2349),o=a.i(9193);let p=(0,d.hoist)(n,"default"),q=(0,d.hoist)(n,"getStaticProps"),r=(0,d.hoist)(n,"getStaticPaths"),s=(0,d.hoist)(n,"getServerSideProps"),t=(0,d.hoist)(n,"config"),u=(0,d.hoist)(n,"reportWebVitals"),v=(0,d.hoist)(n,"unstable_getStaticProps"),w=(0,d.hoist)(n,"unstable_getStaticPaths"),x=(0,d.hoist)(n,"unstable_getStaticParams"),y=(0,d.hoist)(n,"unstable_getServerProps"),z=(0,d.hoist)(n,"unstable_getServerSideProps"),A=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/post-scheduler",pathname:"/post-scheduler",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:n}),B=(0,o.getHandler)({srcPage:"/post-scheduler",config:t,userland:n,routeModule:A,getStaticPaths:r,getStaticProps:q,getServerSideProps:s});a.s(["config",0,t,"default",0,p,"getServerSideProps",0,s,"getStaticPaths",0,r,"getStaticProps",0,q,"handler",0,B,"reportWebVitals",0,u,"routeModule",0,A,"unstable_getServerProps",0,y,"unstable_getServerSideProps",0,z,"unstable_getStaticParams",0,x,"unstable_getStaticPaths",0,w,"unstable_getStaticProps",0,v],2917)}];

//# sourceMappingURL=_6146ea4c._.js.map