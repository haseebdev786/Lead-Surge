{"version":3,"sources":["turbopack:///[project]/utils/ui.js","turbopack:///[project]/pages/admin/users.js","turbopack:///[project]/node_modules/next/dist/esm/build/templates/pages.js"],"sourcesContent":["export const panelClass =\n  'rounded-3xl border border-white/10 bg-white/5 p-6 text-slate-100 shadow-xl shadow-slate-950/20 backdrop-blur-xl';\nexport const heroPanelClass =\n  'rounded-3xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/30 to-indigo-900/20 p-8 text-slate-100 shadow-2xl shadow-slate-950/30';\nexport const mutedLabelClass = 'text-sm font-medium text-slate-300';\nexport const inputClass =\n  'mt-2 w-full rounded-2xl border border-white/20 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60';\nexport const textareaClass = inputClass + ' min-h-[140px] resize-none';\nexport const selectClass = inputClass;\nexport const selectDarkClass = `${selectClass} select-dark`;\nexport const primaryButtonClass =\n  'inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:brightness-105 disabled:cursor-not-allowed disabled:opacity-60';\nexport const secondaryButtonClass =\n  'inline-flex items-center justify-center rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60';\nexport const dangerButtonClass =\n  'inline-flex items-center justify-center rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-2 text-sm font-semibold text-rose-100 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60';\nexport const infoTextClass = 'text-sm text-slate-400';\nexport const pillClass = 'text-[0.65rem] uppercase tracking-[0.35em] text-slate-400';\nexport const statusPillMap = {\n  posted: 'bg-emerald-500/20 text-emerald-200',\n  scheduled: 'bg-amber-500/20 text-amber-200',\n  failed: 'bg-rose-500/20 text-rose-200',\n};\n","import { useEffect, useState } from 'react';\nimport Layout from '../../components/Layout';\nimport withAuth from '../../hoc/withAuth';\nimport {\n  heroPanelClass,\n  panelClass,\n  selectClass,\n  inputClass,\n  pillClass,\n} from '../../utils/ui';\n\n/**\n * Admin Users page. Lists all users with their email, role and credits. An admin\n * can update a user's role and credit balance directly from this table.\n * The page is protected by the withAuth HOC with the adminOnly flag.\n */\nfunction AdminUsers() {\n  const [users, setUsers] = useState([]);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    async function fetchUsers() {\n      const token = localStorage.getItem('token');\n      try {\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/admin/users`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setUsers(data);\n        } else {\n          const err = await res.json();\n          setError(err.error || 'Failed to fetch users');\n        }\n      } catch (err) {\n        setError('Failed to fetch users');\n      }\n    }\n    fetchUsers();\n  }, []);\n\n  async function updateUser(id, role, credits) {\n    setError('');\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/admin/users/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n        body: JSON.stringify({ role, credits }),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Update failed');\n      setUsers(users.map((u) => (u._id === id ? data : u)));\n    } catch (err) {\n      setError(err.message);\n    }\n  }\n\n  return (\n    <Layout>\n      <div className=\"space-y-8\">\n        <section className={heroPanelClass}>\n          <div className=\"flex flex-col gap-4\">\n            <p className={pillClass}>Admin console</p>\n            <h2 className=\"text-4xl font-semibold text-white\">Admin - Users</h2>\n            <p className=\"text-sm text-slate-300\">Adjust roles and credit balances across workspaces.</p>\n          </div>\n        </section>\n        {error && <p className=\"rounded-2xl border border-rose-400/30 bg-rose-500/10 px-4 py-2 text-sm text-rose-100\">{error}</p>}\n        <div className={`${panelClass} overflow-x-auto`}>\n          <table className=\"min-w-full text-sm text-slate-200\">\n            <thead className=\"text-left text-xs uppercase text-slate-400\">\n              <tr className=\"border-b border-white/10\">\n                <th className=\"px-3 py-2 font-semibold\">Email</th>\n                <th className=\"px-3 py-2 font-semibold\">Role</th>\n                <th className=\"px-3 py-2 font-semibold\">Credits</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user._id} className=\"border-b border-white/10 last:border-b-0\">\n                  <td className=\"px-3 py-2 break-all text-slate-100\">{user.email}</td>\n                  <td className=\"px-3 py-2\">\n                    <select\n                      value={user.role}\n                      onChange={(e) => updateUser(user._id, e.target.value, user.credits)}\n                      className={selectClass}\n                    >\n                      <option value=\"customer\">customer</option>\n                      <option value=\"admin\">admin</option>\n                    </select>\n                  </td>\n                  <td className=\"px-3 py-2\">\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={user.credits}\n                      onChange={(e) => updateUser(user._id, user.role, parseInt(e.target.value, 10))}\n                      className={`${inputClass} w-28`}\n                    />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nexport default withAuth(AdminUsers, { adminOnly: true });\r\n\r\n","import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/admin/users\",\n        pathname: \"/admin/users\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/admin/users\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n"],"names":[],"mappings":"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","ignoreList":[2]}