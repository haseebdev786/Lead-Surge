{"version":3,"sources":["turbopack:///[project]/utils/ui.js","turbopack:///[project]/pages/subscription.js","turbopack:///[project]/node_modules/next/dist/esm/build/templates/pages.js"],"sourcesContent":["export const panelClass =\n  'rounded-3xl border border-white/10 bg-white/5 p-6 text-slate-100 shadow-xl shadow-slate-950/20 backdrop-blur-xl';\nexport const heroPanelClass =\n  'rounded-3xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/30 to-indigo-900/20 p-8 text-slate-100 shadow-2xl shadow-slate-950/30';\nexport const mutedLabelClass = 'text-sm font-medium text-slate-300';\nexport const inputClass =\n  'mt-2 w-full rounded-2xl border border-white/20 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60';\nexport const textareaClass = inputClass + ' min-h-[140px] resize-none';\nexport const selectClass = inputClass;\nexport const selectDarkClass = `${selectClass} select-dark`;\nexport const primaryButtonClass =\n  'inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:brightness-105 disabled:cursor-not-allowed disabled:opacity-60';\nexport const secondaryButtonClass =\n  'inline-flex items-center justify-center rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60';\nexport const dangerButtonClass =\n  'inline-flex items-center justify-center rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-2 text-sm font-semibold text-rose-100 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60';\nexport const infoTextClass = 'text-sm text-slate-400';\nexport const pillClass = 'text-[0.65rem] uppercase tracking-[0.35em] text-slate-400';\nexport const statusPillMap = {\n  posted: 'bg-emerald-500/20 text-emerald-200',\n  scheduled: 'bg-amber-500/20 text-amber-200',\n  failed: 'bg-rose-500/20 text-rose-200',\n};\n","import { useState } from 'react';\nimport Layout from '../components/Layout';\nimport withAuth from '../hoc/withAuth';\nimport { useAuth } from '../context/AuthContext';\nimport {\n  heroPanelClass,\n  panelClass,\n  primaryButtonClass,\n  infoTextClass,\n  pillClass,\n} from '../utils/ui';\n\n/**\n * Subscription page. Displays the current subscription status and exposes\n * a button to start or manage a Stripe subscription checkout session. The\n * price ID for the subscription must be defined as an environment\n * variable. Upon successful session creation the user is redirected to\n * Stripe Checkout.\n */\nfunction Subscription() {\n  const { user } = useAuth();\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const priceId = process.env.NEXT_PUBLIC_STRIPE_SUB_PRICE_ID || 'price_XXX';\n  const plans = [\n    {\n      name: 'Starter',\n      price: '$0 / mo',\n      description: 'Great for testing the platform with manual credit boosts.',\n      includes: ['10 starter credits', 'Manual Meta posting', 'Email support within 48h'],\n      highlighted: false,\n    },\n    {\n      name: 'Growth',\n      price: '$49 / mo',\n      description: 'Unlock automation, boosted AI throughput and priority support.',\n      includes: [\n        'Unlimited schedulers & DM automations',\n        'Higher AI rate limits + credit bundles',\n        'Priority support & onboarding call',\n      ],\n      highlighted: true,\n    },\n  ];\n\n  async function subscribe() {\n    setError('');\n    setLoading(true);\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/payments/subscription-session`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n        body: JSON.stringify({ priceId }),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Could not create checkout session');\n      // Redirect user to Stripe hosted checkout page\n      window.location.href = data.url;\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Layout>\n      <div className=\"space-y-8\">\n        <section className={heroPanelClass}>\n          <div className=\"flex flex-col gap-4\">\n            <p className={pillClass}>Billing</p>\n            <h2 className=\"text-4xl font-semibold text-white\">Subscription</h2>\n            <p className=\"text-sm text-slate-300\">\n              Activate a subscription to unlock higher posting limits, DM automations and priority AI throughput.\n            </p>\n          </div>\n        </section>\n        {error && (\n          <p className=\"rounded-2xl border border-rose-400/30 bg-rose-500/10 px-4 py-2 text-sm text-rose-100\">{error}</p>\n        )}\n        <section className={`${panelClass} space-y-4`}>\n          <p className=\"text-lg text-white\">\n            Current plan:{' '}\n            <span className=\"font-semibold capitalize text-white\">{user?.subscriptionStatus || 'none'}</span>\n          </p>\n          <p className={infoTextClass}>\n            Subscribe to unlock higher usage limits and additional features. Billing is handled securely via Stripe.\n          </p>\n          <button type=\"button\" onClick={subscribe} disabled={loading} className={primaryButtonClass}>\n            {loading ? 'Redirecting...' : 'Manage subscription'}\n          </button>\n          {!process.env.NEXT_PUBLIC_STRIPE_SUB_PRICE_ID && (\n            <p className=\"text-xs text-amber-200\">\n              Warning: The Stripe price ID is not configured (NEXT_PUBLIC_STRIPE_SUB_PRICE_ID).\n            </p>\n          )}\n        </section>\n        <section className=\"grid gap-6 lg:grid-cols-2\">\n          {plans.map((plan) => (\n            <div\n              key={plan.name}\n              className={`${panelClass} space-y-4 ${plan.highlighted ? 'border-sky-400/40 shadow-sky-500/30' : ''}`}\n            >\n              <div>\n                <p className=\"text-sm uppercase tracking-[0.35em] text-slate-400\">{plan.name}</p>\n                <div className=\"flex items-baseline gap-2\">\n                  <p className=\"text-3xl font-semibold text-white\">{plan.price}</p>\n                  {plan.highlighted && (\n                    <span className=\"rounded-full border border-sky-400/40 bg-sky-500/10 px-3 py-1 text-xs text-sky-100\">\n                      Recommended\n                    </span>\n                  )}\n                </div>\n                <p className=\"text-sm text-slate-300\">{plan.description}</p>\n              </div>\n              <ul className=\"space-y-2 text-sm text-slate-200\">\n                {plan.includes.map((benefit) => (\n                  <li key={benefit} className=\"flex items-start gap-2\">\n                    <span className=\"mt-1 h-1.5 w-1.5 rounded-full bg-sky-300\" />\n                    <span>{benefit}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </section>\n      </div>\n    </Layout>\n  );\n}\n\nexport default withAuth(Subscription);\n","import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/subscription\",\n        pathname: \"/subscription\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/subscription\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n"],"names":[],"mappings":"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","ignoreList":[2]}