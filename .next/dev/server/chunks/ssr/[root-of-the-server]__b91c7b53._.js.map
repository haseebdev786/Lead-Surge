{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Haseeb/Projects/lead%20saas%20fb/social-media-saas/frontend-2/components/Layout.js"],"sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { useAuth } from '../context/AuthContext';\n\n/**\n * Layout component that wraps authenticated pages. It provides a sidebar\n * navigation, a header with user information and a logout button, and a\n * content area. The navigation highlights the active route and adapts to\n * whether the user is an admin.\n */\nexport default function Layout({ children }) {\n  const { user, logout } = useAuth();\n  const router = useRouter();\n\n  // Define navigation items available to all users\n  const nav = [\n    { href: '/dashboard', label: 'Dashboard' },\n    { href: '/hashtag-discovery', label: 'Hashtag Discovery' },\n    { href: '/post-scheduler', label: 'Post Scheduler' },\n    { href: '/dm-templates', label: 'DM Automation' },\n    { href: '/subscription', label: 'Subscription' },\n    { href: '/credits', label: 'Credits' },\n    { href: '/account', label: 'Account Settings' },\n  ];\n  // Add admin navigation if applicable\n  if (user && user.role === 'admin') {\n    nav.push({ href: '/admin/users', label: 'Admin Users' });\n  }\n\n  return (\n    <div className=\"flex min-h-screen\">\n      {/* Sidebar */}\n      <aside className=\"w-60 bg-white border-r border-gray-200 hidden sm:block\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h2 className=\"text-2xl font-semibold text-gray-800\">LeadGen SaaS</h2>\n        </div>\n        <nav className=\"p-4 space-y-2\">\n          {nav.map((item) => {\n            const active = router.pathname === item.href;\n            return (\n              <Link key={item.href} href={item.href} legacyBehavior>\n                <a\n                  className={`block px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 ${\n                    active ? 'bg-gray-100 text-blue-600' : 'text-gray-700'\n                  }`}\n                >\n                  {item.label}\n                </a>\n              </Link>\n            );\n          })}\n        </nav>\n      </aside>\n      {/* Main content with header */}\n      <div className=\"flex-1 flex flex-col\">\n        <header className=\"bg-white shadow-sm border-b border-gray-200\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-xl font-semibold text-gray-900\">{nav.find((n) => n.href === router.pathname)?.label || ''}</h1>\n            </div>\n            {/* User info and logout */}\n            {user && (\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-medium text-gray-700\">{user.email}</p>\n                  <p className=\"text-xs text-gray-500\">Credits: {user.credits ?? 0}</p>\n                  <p className=\"text-xs text-gray-500\">Subscription: {user.subscriptionStatus || 'none'}</p>\n                </div>\n                <button\n                  onClick={logout}\n                  className=\"px-3 py-2 text-sm text-white bg-blue-600 rounded hover:bg-blue-700\"\n                >\n                  Logout\n                </button>\n              </div>\n            )}\n          </div>\n        </header>\n        <main className=\"flex-1 bg-gray-50 p-4 overflow-y-auto\">{children}</main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAQe,SAAS,OAAO,EAAE,QAAQ,EAAE;IACzC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,0HAAO;IAChC,MAAM,SAAS,IAAA,oIAAS;IAExB,iDAAiD;IACjD,MAAM,MAAM;QACV;YAAE,MAAM;YAAc,OAAO;QAAY;QACzC;YAAE,MAAM;YAAsB,OAAO;QAAoB;QACzD;YAAE,MAAM;YAAmB,OAAO;QAAiB;QACnD;YAAE,MAAM;YAAiB,OAAO;QAAgB;QAChD;YAAE,MAAM;YAAiB,OAAO;QAAe;QAC/C;YAAE,MAAM;YAAY,OAAO;QAAU;QACrC;YAAE,MAAM;YAAY,OAAO;QAAmB;KAC/C;IACD,qCAAqC;IACrC,IAAI,QAAQ,KAAK,IAAI,KAAK,SAAS;QACjC,IAAI,IAAI,CAAC;YAAE,MAAM;YAAgB,OAAO;QAAc;IACxD;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BAEb,qKAAC;gBAAM,WAAU;;kCACf,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BAAG,WAAU;sCAAuC;;;;;;;;;;;kCAEvD,qKAAC;wBAAI,WAAU;kCACZ,IAAI,GAAG,CAAC,CAAC;4BACR,MAAM,SAAS,OAAO,QAAQ,KAAK,KAAK,IAAI;4BAC5C,qBACE,qKAAC,gIAAI;gCAAiB,MAAM,KAAK,IAAI;gCAAE,cAAc;0CACnD,cAAA,qKAAC;oCACC,WAAW,CAAC,iEAAiE,EAC3E,SAAS,8BAA8B,iBACvC;8CAED,KAAK,KAAK;;;;;;+BANJ,KAAK,IAAI;;;;;wBAUxB;;;;;;;;;;;;0BAIJ,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAO,WAAU;kCAChB,cAAA,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;8CACC,cAAA,qKAAC;wCAAG,WAAU;kDAAuC,IAAI,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,OAAO,QAAQ,GAAG,SAAS;;;;;;;;;;;gCAG5G,sBACC,qKAAC;oCAAI,WAAU;;sDACb,qKAAC;4CAAI,WAAU;;8DACb,qKAAC;oDAAE,WAAU;8DAAqC,KAAK,KAAK;;;;;;8DAC5D,qKAAC;oDAAE,WAAU;;wDAAwB;wDAAU,KAAK,OAAO,IAAI;;;;;;;8DAC/D,qKAAC;oDAAE,WAAU;;wDAAwB;wDAAe,KAAK,kBAAkB,IAAI;;;;;;;;;;;;;sDAEjF,qKAAC;4CACC,SAAS;4CACT,WAAU;sDACX;;;;;;;;;;;;;;;;;;;;;;;kCAOT,qKAAC;wBAAK,WAAU;kCAAyC;;;;;;;;;;;;;;;;;;AAIjE","debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///D:/Haseeb/Projects/lead%20saas%20fb/social-media-saas/frontend-2/hoc/withAuth.js"],"sourcesContent":["import { useRouter } from 'next/router';\nimport { useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\n\n/**\n * Higher-order component to enforce authentication on pages. When applied\n * to a page component it checks if the user is authenticated and, if\n * necessary, redirects to the login page. It also supports optional\n * roleâ€‘based access control for admin pages.\n *\n * Usage:\n *   export default withAuth(MyPage); // for any authenticated user\n *   export default withAuth(MyAdminPage, { adminOnly: true });\n */\nexport default function withAuth(Component, { adminOnly = false } = {}) {\n  return function AuthenticatedComponent(props) {\n    const { user, loading } = useAuth();\n    const router = useRouter();\n\n    useEffect(() => {\n      if (!loading) {\n        if (!user) {\n          // User not logged in; redirect to login\n          router.replace('/login');\n        } else if (adminOnly && user.role !== 'admin') {\n          // Logged in but not an admin; redirect to dashboard\n          router.replace('/dashboard');\n        }\n      }\n    }, [loading, user, adminOnly, router]);\n\n    // Show nothing while verifying auth state or redirecting\n    if (loading || !user || (adminOnly && user.role !== 'admin')) {\n      return <div className=\"p-6\">Loading...</div>;\n    }\n    return <Component {...props} />;\n  };\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAYe,SAAS,SAAS,SAAS,EAAE,EAAE,YAAY,KAAK,EAAE,GAAG,CAAC,CAAC;IACpE,OAAO,SAAS,uBAAuB,KAAK;QAC1C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,0HAAO;QACjC,MAAM,SAAS,IAAA,oIAAS;QAExB,IAAA,gHAAS,EAAC;YACR,IAAI,CAAC,SAAS;gBACZ,IAAI,CAAC,MAAM;oBACT,wCAAwC;oBACxC,OAAO,OAAO,CAAC;gBACjB,OAAO,IAAI,aAAa,KAAK,IAAI,KAAK,SAAS;oBAC7C,oDAAoD;oBACpD,OAAO,OAAO,CAAC;gBACjB;YACF;QACF,GAAG;YAAC;YAAS;YAAM;YAAW;SAAO;QAErC,yDAAyD;QACzD,IAAI,WAAW,CAAC,QAAS,aAAa,KAAK,IAAI,KAAK,SAAU;YAC5D,qBAAO,qKAAC;gBAAI,WAAU;0BAAM;;;;;;QAC9B;QACA,qBAAO,qKAAC;YAAW,GAAG,KAAK;;;;;;IAC7B;AACF","debugId":null}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///D:/Haseeb/Projects/lead%20saas%20fb/social-media-saas/frontend-2/pages/credits.js"],"sourcesContent":["import { useState } from 'react';\nimport Layout from '../components/Layout';\nimport withAuth from '../hoc/withAuth';\nimport { useAuth } from '../context/AuthContext';\n\n/**\n * Credits page. Displays the user's current credit balance and provides\n * a form to purchase additional credits via Stripe. The quantity and\n * price ID are configurable via environment variables. When the user\n * initiates a purchase they are redirected to Stripe Checkout.\n */\nfunction Credits() {\n  const { user } = useAuth();\n  const [creditsToBuy, setCreditsToBuy] = useState(10);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const priceId = process.env.NEXT_PUBLIC_STRIPE_CREDIT_PRICE_ID || 'price_YYY';\n\n  async function purchaseCredits() {\n    setError('');\n    setLoading(true);\n    const qty = parseInt(creditsToBuy, 10);\n    if (!qty || qty <= 0) {\n      setError('Please enter a valid number of credits');\n      setLoading(false);\n      return;\n    }\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/payments/credits-session`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n        body: JSON.stringify({ credits: qty, priceId }),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Failed to create checkout session');\n      window.location.href = data.url;\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Layout>\n      <div className=\"max-w-xl mx-auto\">\n        <h2 className=\"text-2xl font-semibold mb-4\">Credits</h2>\n        {error && <p className=\"text-red-600 mb-2\">{error}</p>}\n        <div className=\"card space-y-4\">\n          <p className=\"text-gray-700\">Current balance: <span className=\"font-semibold\">{user?.credits ?? 0}</span></p>\n          <div>\n            <label htmlFor=\"credits\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Credits to purchase\n            </label>\n            <input\n              id=\"credits\"\n              type=\"number\"\n              min=\"1\"\n              value={creditsToBuy}\n              onChange={(e) => setCreditsToBuy(e.target.value)}\n              className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n            />\n          </div>\n          <button\n            type=\"button\"\n            onClick={purchaseCredits}\n            disabled={loading}\n            className=\"px-4 py-2 text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n          >\n            {loading ? 'Redirecting...' : 'Purchase'}\n          </button>\n          {!process.env.NEXT_PUBLIC_STRIPE_CREDIT_PRICE_ID && (\n            <p className=\"mt-2 text-xs text-red-600\">\n              Warning: The Stripe credit price ID is not configured (NEXT_PUBLIC_STRIPE_CREDIT_PRICE_ID).\n            </p>\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nexport default withAuth(Credits);\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA;;;;;CAKC,GACD,SAAS;IACP,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0HAAO;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ,EAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,UAAU,QAAQ,GAAG,CAAC,kCAAkC,IAAI;IAElE,eAAe;QACb,SAAS;QACT,WAAW;QACX,MAAM,MAAM,SAAS,cAAc;QACnC,IAAI,CAAC,OAAO,OAAO,GAAG;YACpB,SAAS;YACT,WAAW;YACX;QACF;QACA,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,iEAAmC,yBAAyB,CAAC,EAAE;gBACrF,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;oBAAoB,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;gBAChF,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;oBAAK;gBAAQ;YAC/C;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAC3C,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,GAAG;QACjC,EAAE,OAAO,KAAK;YACZ,SAAS,IAAI,OAAO;QACtB,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,qKAAC,wHAAM;kBACL,cAAA,qKAAC;YAAI,WAAU;;8BACb,qKAAC;oBAAG,WAAU;8BAA8B;;;;;;gBAC3C,uBAAS,qKAAC;oBAAE,WAAU;8BAAqB;;;;;;8BAC5C,qKAAC;oBAAI,WAAU;;sCACb,qKAAC;4BAAE,WAAU;;gCAAgB;8CAAiB,qKAAC;oCAAK,WAAU;8CAAiB,MAAM,WAAW;;;;;;;;;;;;sCAChG,qKAAC;;8CACC,qKAAC;oCAAM,SAAQ;oCAAU,WAAU;8CAA+C;;;;;;8CAGlF,qKAAC;oCACC,IAAG;oCACH,MAAK;oCACL,KAAI;oCACJ,OAAO;oCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAC/C,WAAU;;;;;;;;;;;;sCAGd,qKAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,UAAU,mBAAmB;;;;;;wBAE/B,CAAC,QAAQ,GAAG,CAAC,kCAAkC,kBAC9C,qKAAC;4BAAE,WAAU;sCAA4B;;;;;;;;;;;;;;;;;;;;;;;AAQrD;uCAEe,IAAA,mHAAQ,EAAC","debugId":null}}]
}