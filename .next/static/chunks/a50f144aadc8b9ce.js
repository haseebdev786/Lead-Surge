(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8394,e=>{"use strict";let t="mt-2 w-full rounded-2xl border border-white/20 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",s=t+" min-h-[140px] resize-none",a=`${t} select-dark`;e.s(["dangerButtonClass",0,"inline-flex items-center justify-center rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-2 text-sm font-semibold text-rose-100 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60","heroPanelClass",0,"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/30 to-indigo-900/20 p-8 text-slate-100 shadow-2xl shadow-slate-950/30","infoTextClass",0,"text-sm text-slate-400","inputClass",0,t,"mutedLabelClass",0,"text-sm font-medium text-slate-300","panelClass",0,"rounded-3xl border border-white/10 bg-white/5 p-6 text-slate-100 shadow-xl shadow-slate-950/20 backdrop-blur-xl","pillClass",0,"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400","primaryButtonClass",0,"inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-400 via-blue-500 to-indigo-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:brightness-105 disabled:cursor-not-allowed disabled:opacity-60","secondaryButtonClass",0,"inline-flex items-center justify-center rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60","selectClass",0,t,"selectDarkClass",0,a,"statusPillMap",0,{posted:"bg-emerald-500/20 text-emerald-200",scheduled:"bg-amber-500/20 text-amber-200",failed:"bg-rose-500/20 text-rose-200"},"textareaClass",0,s])},7612,e=>{"use strict";var t=e.i(1398),s=e.i(1788),a=e.i(8965),l=e.i(4714),r=e.i(7639),i=e.i(8394);let o=(0,l.default)(function(){let{refresh:e}=(0,r.useAuth)(),[l,o]=(0,s.useState)([]),[n,d]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[p,u]=(0,s.useState)(""),[b,f]=(0,s.useState)(""),[g,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(!1);async function C(e){e.preventDefault(),j(""),y(""),v(!0);let t=localStorage.getItem("token");try{let e=await fetch("http://localhost:4000/api/dms/templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({name:n,message:c})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create template");o([s,...l]),d(""),m(""),y("Template created")}catch(e){j(e.message)}finally{v(!1)}}async function S(e){j(""),y("");let t=localStorage.getItem("token");try{if(!(await fetch(`http://localhost:4000/api/dms/templates/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw Error("Delete failed");o(l.filter(t=>t._id!==e)),h===e&&x(""),y("Template deleted")}catch(e){j(e.message)}}async function k(){if(j(""),y(""),!h)return void j("Please select a template first");let t=l.find(e=>e._id===h);if(!t)return void j("Selected template not found");v(!0);let s=localStorage.getItem("token");try{let a=await fetch("http://localhost:4000/api/ai/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({template:t.message})}),l=await a.json();if(!a.ok)throw Error(l.error||"Failed to personalize message");f(l.message),y("Message personalized"),await e()}catch(e){j(e.message)}finally{v(!1)}}async function T(){if(j(""),y(""),!h)return void j("Please select a template first");if(!p)return void j("Recipient ID is required");let t=l.find(e=>e._id===h),s=b||(t?t.message:"");if(!s)return void j("No message to send");v(!0);let a=localStorage.getItem("token");try{let t=await fetch("http://localhost:4000/api/dms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({recipientId:p,message:s})}),l=await t.json();if(!t.ok)throw Error(l.error||"Failed to send DM");y("Message sent successfully"),u(""),f(""),await e()}catch(e){j(e.message)}finally{v(!1)}}return(0,s.useEffect)(()=>{!async function(){let e=localStorage.getItem("token");try{let t=await fetch("http://localhost:4000/api/dms/templates",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();o(e)}}catch(e){console.error("Failed to load templates",e)}}()},[]),(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("section",{className:i.heroPanelClass,children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("p",{className:i.pillClass,children:"Outreach studio"}),(0,t.jsx)("h2",{className:"text-4xl font-semibold text-white",children:"DM Automation"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Save reusable scripts, personalize them with AI and push Instagram DMs without leaving your dashboard."})]})}),w&&(0,t.jsx)("p",{className:"rounded-2xl border border-rose-400/30 bg-rose-500/10 px-4 py-2 text-sm text-rose-100",children:w}),g&&(0,t.jsx)("p",{className:"rounded-2xl border border-emerald-400/30 bg-emerald-400/10 px-4 py-2 text-sm text-emerald-100",children:g}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:`${i.panelClass} space-y-4`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:i.pillClass,children:"Templates"}),(0,t.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Create a template"}),(0,t.jsx)("p",{className:i.infoTextClass,children:"Draft once, reuse forever. AI can personalize later."})]}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:i.mutedLabelClass,children:"Template Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:n,onChange:e=>d(e.target.value),required:!0,className:i.inputClass})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"message",className:i.mutedLabelClass,children:"Message Text"}),(0,t.jsx)("textarea",{id:"message",value:c,onChange:e=>m(e.target.value),rows:4,required:!0,className:i.textareaClass})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:N,className:i.primaryButtonClass,children:N?"Saving...":"Save Template"})})]})]}),(0,t.jsxs)("div",{className:`${i.panelClass} space-y-4`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:i.pillClass,children:"Library"}),(0,t.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Templates"}),(0,t.jsx)("p",{className:i.infoTextClass,children:"Select, personalize and send without leaving this panel."})]}),0===l.length?(0,t.jsx)("p",{className:i.infoTextClass,children:"No templates created yet."}):(0,t.jsx)("ul",{className:"space-y-3",children:l.map(e=>(0,t.jsxs)("li",{className:`rounded-2xl border p-3 text-sm ${h===e._id?"border-sky-400/40 bg-sky-500/10":"border-white/10 bg-white/5"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-white",children:e.name}),(0,t.jsx)("p",{className:"text-slate-300 break-words",children:e.message})]}),(0,t.jsx)("button",{onClick:()=>S(e._id),className:`${i.dangerButtonClass} ml-2`,children:"Delete"})]}),(0,t.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,t.jsx)("button",{onClick:()=>x(e._id),className:`text-xs ${h===e._id?"rounded-full bg-sky-500/80 px-3 py-1 font-semibold text-white":"rounded-full border border-white/15 px-3 py-1 text-slate-300 hover:border-white/40"}`,children:h===e._id?"Selected":"Select"})})]},e._id))}),l.length>0&&(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsx)("h4",{className:"text-xl font-semibold text-white",children:"Personalize & Send"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"recipient",className:i.mutedLabelClass,children:"Recipient IG User ID"}),(0,t.jsx)("input",{id:"recipient",type:"text",value:p,onChange:e=>u(e.target.value),placeholder:"123456789",className:i.inputClass})]}),b&&(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-white",children:"Personalized Message"}),(0,t.jsx)("p",{className:"text-slate-200 whitespace-pre-line break-words",children:b})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:k,disabled:N,className:i.secondaryButtonClass,children:N?"Generating...":"Personalize Message"}),(0,t.jsx)("button",{type:"button",onClick:T,disabled:N,className:i.primaryButtonClass,children:N?"Sending...":"Send DM"})]})]})]})]})]})})});e.s(["default",0,o])},8038,(e,t,s)=>{let a="/dm-templates";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(7612)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},8761,e=>{e.v(t=>Promise.all(["static/chunks/df56c2ef92c6043e.js"].map(t=>e.l(t))).then(()=>t(3594)))},8805,e=>{e.v(t=>Promise.all(["static/chunks/5ec9ab7aae3f3e76.js"].map(t=>e.l(t))).then(()=>t(9466)))}]);